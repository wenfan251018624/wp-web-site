# Apache虚拟主机配置文件

<VirtualHost *:80>
    ServerName your-domain.com
    ServerAlias www.your-domain.com
    DocumentRoot /var/www/html/wp-site
    
    <Directory /var/www/html/wp-site>
        AllowOverride All
        Require all granted
    </Directory>
    
    # 启用重写规则（用于WordPress固定链接）
    RewriteEngine On
    
    # 日志文件
    ErrorLog ${APACHE_LOG_DIR}/wp-site_error.log
    CustomLog ${APACHE_LOG_DIR}/wp-site_access.log combined
</VirtualHost>

# 安全设置
<Directory /var/www/html/wp-site>
    # 阻止访问wp-config.php文件
    <Files wp-config.php>
        Require all denied
    </Files>
    
    # 阻止访问.htaccess文件
    <Files .htaccess>
        Require all denied
    </Files>
    
    # 阻止访问敏感文件
    <FilesMatch "^.*(error_log|README.md|readme.html|license.txt|CHANGELOG.txt|composer.json|package.json|package-lock.json|yarn.lock|webpack.config.js).*$">
        Require all denied
    </FilesMatch>
</Directory>

# 启用必要的Apache模块
# 运行以下命令启用模块：
# sudo a2enmod rewrite
# sudo a2enmod headers
# sudo a2enmod ssl